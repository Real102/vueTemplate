# vue å¼€å‘æ¨¡æ¿

## æ¦‚è§ˆ

æœ¬é¡¹ç›®ä¸º `vue` å¼€å‘æ¨¡æ¿ï¼ŒåŸºäº `vue2.x` + `vue-cli4.x` + `webpack` + `element-ui` + `es6` + `less` + `express` æŠ€æœ¯æ ˆå¼€å‘

## è¿è¡Œ

### å‘½ä»¤è¡Œ

å¸¸ç”¨å‘½ä»¤è¡Œç¤ºä¾‹ï¼š

- `npm run dev`ï¼š æœ¬åœ°è¿è¡Œé¡¹ç›®
- `npm run stage`ï¼š æ‰“åŒ…æµ‹è¯•ç¯å¢ƒï¼ˆå¦‚éœ€ï¼‰
- `npm run build`ï¼š æ‰“åŒ…ç”Ÿäº§ç¯å¢ƒ
- `npm run analyze`ï¼š æ‰“åŒ…ä½“ç§¯åˆ†æ
- `npm run compressImg`ï¼šå‹ç¼©å›¾ç‰‡ä½“ç§¯ï¼ˆè§„åˆ’ä¸­ï¼‰

å…·ä½“ä»¥é¡¹ç›®ä¸­ `package.json` ä¸­ `scripts` å†…å®¹ä¸ºå‡†

Tipsï¼š

- å¯ä»¥é€šè¿‡ `vscode explorer` æ¨¡å—å·¦ä¸‹æ–¹çš„ `NPM SCRIPTS` ç‚¹å‡»å¿«é€Ÿå¯åŠ¨

## è§„èŒƒ

### vue ç»„ä»¶é¡ºåºè§„èŒƒï¼ˆè¯·é…ç½® eslintï¼Œå·²æ”¯æŒè‡ªåŠ¨ä¿®å¤åŠŸèƒ½ï¼‰

```text
elï¼š            æŒ‚è½½DOM
nameï¼š          ç»„ä»¶åç§°
componentsï¼š    æ³¨å†Œç»„ä»¶
directivesï¼š    æ³¨å†ŒæŒ‡ä»¤
filtersï¼š       æ³¨å†Œè¿‡æ»¤å™¨ï¼ˆvue3å·²åºŸé™¤ï¼Œé¿å…ä½¿ç”¨ï¼‰
mixinsï¼š        æ³¨å†Œè¿‡æ»¤å™¨
propsï¼š         ç»„ä»¶ä¼ å‚
data()          æ•°æ®
computedï¼š      è®¡ç®—å±æ€§
watchï¼š         ç›‘å¬
mounted()       é’©å­å‡½æ•°
methodsï¼š       æ–¹æ³•
```

#### commit message è§„èŒƒ

- å°†æ‰“åŒ…çš„è¾“å‡ºè·¯å¾„ã€local æ–‡ä»¶ç­‰ä¸éœ€è¦æäº¤åˆ° gitlab çš„æ–‡ä»¶æ·»åŠ åˆ° .gitignore æ–‡ä»¶ä¸­
- åˆ†åŠŸèƒ½ç‚¹å¡«å†™ commit ä¿¡æ¯ã€‚
  - å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æäº¤ï¼Œå¯ä»¥è€ƒè™‘å·²æ•´ä¸ªåŠŸèƒ½æ¨¡å—å‘½åæäº¤ä¿¡æ¯å¦‚ï¼š`featï¼šæ­å»ºåº”ç”¨é¡µäºŒçº§è¯¦æƒ…é¡µå‰ç«¯å¼€å‘ï¼ˆæœªæ¥æ¥å£ï¼‰`
  - å¦‚æœæ˜¯ä¿®æ”¹ bugï¼ŒåŒæ—¶åˆæœ‰ä¸€äº›æ–°çš„åŠŸèƒ½ç‚¹ï¼Œé‚£ä¹ˆéœ€è¦æ˜ç¡®åŒºåˆ†
  - **Tips**: å¯ä»¥è€ƒè™‘ä½¿ç”¨ vscode çš„ `Source Control` æ¨¡å—ï¼Œå°†åŒä¸€åŠŸèƒ½ç‚¹/æ¨¡å—/bug æ”¾å…¥åˆ°ä¸€ä¸ª stage change ä¸­å¹¶å¡«å†™å¯¹åº”çš„ messageï¼Œå† commit staged åˆ°ç¼“å­˜åŒºï¼Œç­‰æ‰€æœ‰ stage éƒ½å†™å¥½è¯´æ˜åå†ä¸€å¹¶ commit æ‰€æœ‰æ”¹åŠ¨
- æäº¤åˆ° gitlab çš„å¯¹åº”å¼€å‘åˆ†æ”¯

```doc
feat: æ–°ç‰¹æ€§
fix: ä¿®æ”¹é—®é¢˜
refactor: ä»£ç é‡æ„
docs: æ–‡æ¡£ä¿®æ”¹
style: ä»£ç æ ¼å¼ä¿®æ”¹, æ³¨æ„ä¸æ˜¯ css ä¿®æ”¹
test: æµ‹è¯•ç”¨ä¾‹ä¿®æ”¹
chore: å…¶ä»–ä¿®æ”¹, æ¯”å¦‚æ„å»ºæµç¨‹, ä¾èµ–ç®¡ç†
```

Source Control æ“ä½œå‚è€ƒç¤ºæ„å›¾ï¼š

![Source Control æ“ä½œå‚è€ƒç¤ºæ„å›¾](./docs/img/git-commit.png 'Source Control æ“ä½œå‚è€ƒç¤ºæ„å›¾')

å‚è€ƒæ–‡æ¡£ï¼š

- [Commit message å’Œ Change log ç¼–å†™æŒ‡å—](http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html)
- [Git-Commit-Log è§„èŒƒï¼ˆAngular è§„èŒƒï¼‰](https://www.jianshu.com/p/c7e40dab5b05)

### ä»£ç ä¹¦å†™è§„èŒƒ

### views ç›®å½•å»ºè®®

å°½é‡æŠŠä¸€ä¸ªæ¨¡å—çš„ä»£ç æ”¾ç½®åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹å†…

![æ±‡èšé¡µé£æ ¼](./docs/img/views-hjy.png 'æ±‡èšé¡µé£æ ¼')
![æ”¯ä»˜å¹³å°é£æ ¼](./docs/img/views-pay.png 'æ”¯ä»˜å¹³å°')

## é…ç½®é¡¹

### ç¯å¢ƒå˜é‡

- .env.development å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼Œéœ€è¦æäº¤åˆ° gitlab
- .env.development.local å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼Œä¸éœ€è¦æäº¤åˆ° gitlabï¼Œç”¨äºæœ¬æœºæµ‹è¯•ç¯å¢ƒä¸‹ä¸åŒæµ‹è¯•æ¡ä»¶çš„è°ƒæ•´ï¼Œä¼˜å…ˆçº§é«˜äº.env.developmentï¼Œä½†éå¿…é¡»æ–‡ä»¶
- .env.production ç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼Œéœ€è¦æäº¤åˆ° gitlab
- .env.stage æµ‹è¯•ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼Œéœ€è¦æäº¤åˆ° gitlab

#### å…³é”®å‚æ•°è§£æ

- NODE_ENVï¼švue-cli æ‰“åŒ…æ¨¡å¼ï¼ˆå€¼åªèƒ½ä¸ºï¼šdevelopmentã€productionã€testï¼‰
- ENVï¼šç¯å¢ƒå˜é‡å‚æ•°ï¼Œå¯ä»¥ä¸ºä»»æ„è‡ªå®šä¹‰æ•°æ®ï¼Œè¡¨ç¤ºå½“å‰æ‰€å¤„ç¯å¢ƒï¼ˆä¸€èˆ¬ä¸ºï¼šå¼€å‘ç¯å¢ƒ developmentã€ç”Ÿäº§ç¯å¢ƒ productionã€æµ‹è¯•ç¯å¢ƒ stageï¼‰
- VUE_APP_BASE_URLï¼šç»Ÿä¸€æ¥å£å‰ç¼€ï¼Œå³åŸŸåï¼Œå¼€å‘ç¯å¢ƒä¸‹ç”¨äºæ¥å£ä»£ç†ï¼Œæ­£å¼ç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒä¸‹ç”¨äºä¿®æ”¹åŸŸå
- VUE_APP_PROXY_PREFIXï¼šå¼€å‘ç¯å¢ƒä¸‹çš„æ¥å£å‰ç¼€ï¼Œç”¨äºæ¥å£ä»£ç†ï¼ˆproxyï¼‰ï¼ˆä»…ç”¨äºå¼€å‘ç¯å¢ƒï¼‰

### setting.js å…¨å±€é…ç½®æ–‡ä»¶

## å¼€å‘

### é¡¹ç›®ç»“æ„

```text
|-- .vscode è¦†ç›–vscodeçš„é…ç½®
|-- dist æ‰“åŒ…è·¯å¾„ï¼Œéœ€è¦åŒºåˆ†é¡¹ç›®è®¾ç½®æ‰“åŒ…å
|-- node_modules ä¾èµ–è·¯å¾„
|-- public ä¸éœ€è¦å‹ç¼©çš„å›¾ç‰‡ã€html ç­‰
|-- src
|   |-- api æ‰€æœ‰æ¥å£å­˜æ”¾è·¯å¾„ï¼Œä»¥æ¨¡å—åˆ’åˆ†æ¥å£æ–‡ä»¶
|   |-- assets å›¾ç‰‡èµ„æº
|       |-- icon éœ€è¦åˆ¶ä½œé›ªç¢§å›¾çš„ icon å­˜æ”¾è·¯å¾„
|       |-- imgs å…¶ä»–æ‰€æœ‰å›¾ç‰‡éƒ½å­˜æ”¾åœ¨å½“å‰è·¯å¾„ï¼Œæ­¤è·¯å¾„çš„æ–‡ä»¶éƒ½ä¼šç»è¿‡ webpack å‹ç¼©
|       |-- svg svg å›¾ç‰‡å­˜æ”¾è·¯å¾„
|   |-- components å…¨å±€ç»„ä»¶/ç¬¬ä¸‰æ–¹ç»„ä»¶
|   |-- directives å…¨å±€æŒ‡ä»¤/è‡ªå®šä¹‰æŒ‡ä»¤
|   |-- filters è‡ªå®šä¹‰è¿‡æ»¤å™¨/ç¬¬ä¸‰æ–¹è¿‡æ»¤å™¨ï¼ˆç”±äºvue3åºŸé™¤äº†è¿‡æ»¤å™¨ï¼Œè€ƒè™‘ä¸å°†filtersçº³å…¥ç‰ˆæœ¬ï¼‰
|   |-- layout é¡µé¢ç»“æ„ä»£ç ï¼šé¡¶éƒ¨å¯¼èˆªå’Œä¾§è¾¹å¯¼èˆª
|   |-- libs ç¬¬ä¸‰æ–¹jsæ–‡ä»¶/åŒ…ï¼Œä¸æ”¯æŒnpmä¸‹è½½çš„ç¬¬ä¸‰æ–¹åŒ…éƒ½å­˜æ”¾åœ¨å½“å‰è·¯å¾„
|   |-- mixins è‡ªå®šä¹‰æ··å…¥ mixin
|   |-- plugins è‡ªå®šä¹‰æ’ä»¶/ç¬¬ä¸‰æ–¹æ’ä»¶
|       |-- element-ui é¥¿äº†ä¹ˆæŒ‰éœ€åŠ è½½
|   |-- router è·¯ç”±æ³¨å†Œã€æƒé™è·¯ç”±
|   |-- service axios å…¨å±€æ‹¦æˆªå™¨é…ç½®
|   |-- store vuex é…ç½®
|       |-- modules  æŒ‰æ¨¡å—åˆ’åˆ†
|       |-- index.js
|   |-- styles æ ·å¼èµ„æº
|       |-- sprite   é›ªç¢§å›¾å­˜æ”¾è·¯å¾„
|       |-- _variables.less   å˜é‡
|       |-- common.less  å…¬å…±/å¸¸ç”¨æ ·å¼mixin
|       |-- reset.less   æ ·å¼åˆå§‹åŒ–æ–‡ä»¶
|   |-- utils å·¥å…·å‡½æ•°
|   |-- views
|       |-- module1 å‚è€ƒç¤ºä¾‹ï¼šæ¨¡å—ä¸€
|           |-- components å±€éƒ¨ç»„ä»¶
|           |-- filters å±€éƒ¨è¿‡æ»¤å™¨
|           |-- mixins å±€éƒ¨æ··å…¥
|           |-- plugins å±€éƒ¨æ’ä»¶
|       |-- others
|           |-- 404.vue é¡µé¢ä¸å­˜åœ¨ï¼Œé‡å®šå‘åˆ° 404 é¡µé¢
|       |-- app.vue å…¥å£æ–‡ä»¶
|       |-- main.js å…¥å£æ–‡ä»¶
|       |-- settings.js å…¨å±€é…ç½®æ–‡ä»¶
|-- .env.development(.local) æœ¬åœ°æµ‹è¯•ç¯å¢ƒé…ç½®æ–‡ä»¶ï¼ˆ.local åç¼€ä¸ºæœ¬åœ°ç”Ÿæ•ˆæ–‡ä»¶ï¼‰
|-- .env.production(.local) ç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶
|-- .env.stage(.local) åœ¨çº¿æµ‹è¯•ç¯å¢ƒé…ç½®æ–‡ä»¶
|-- .eslintrc.js eslint é…ç½®æ–‡ä»¶
|-- .gitignore  gitæäº¤é™åˆ¶æ–‡ä»¶
|-- .prettier.config.js prettier é…ç½®æ–‡ä»¶
|-- vue.config.js vue æ‰“åŒ…é…ç½®æ–‡ä»¶
```

### åŠŸèƒ½/æ’ä»¶è¯´æ˜

#### layout å¸ƒå±€

**æ¦‚è¿°**ï¼šæŠ½ç¦»é¡¶éƒ¨å¯¼èˆªæ  topBar å’Œä¾§è¾¹å¯¼èˆªæ  sideBar çš„ä»£ç å¹¶å½¢æˆ layout ç»„ä»¶

**ç”¨æ³•**ï¼šå°† layout ç»„ä»¶ä½œä¸ºâ€œçˆ¶â€ç»„ä»¶ï¼Œæ’å…¥åˆ°æ¯ä¸ªæ¨¡å—ä¸­ï¼Œå­ç»„ä»¶éƒ½é€šè¿‡ layout æ‰“å¼€ï¼Œè¾¾åˆ°ç›¸åŒç»“æ„çš„æ•ˆæœï¼Œå¹¶æ˜“äºæ§åˆ¶æ˜¾éš

```javascript
// router.js
const Layout = () => import('@/layout/index.vue')
const routes = [{
  path: '/test',
  component: Layout,    // å…³é”®
  children: [
    {
      path: '/test/index',
      component: () => import(/* webpackChunkName: "test" */ '@/views/test/index.vue')
    }
  ]
}],
```

#### å·¥å…·å‡½æ•°

##### index.js

åŒ…å«è¾ƒå¤šå¸¸ç”¨çš„å·¥å…·å‡½æ•°ï¼š`deepclone`ã€`parseTime`ã€`debounce` ç­‰

##### open-window.js

æ–°æ ‡ç­¾æ‰“å¼€é¡µé¢å·¥å…·å‡½æ•°ï¼Œç¦ç”¨äº† `opener`ã€`referrer` ç­‰åŠŸèƒ½

## vscode æ’ä»¶

### Better Comments æ›´å‹å¥½çš„æ³¨é‡Š

ä½¿ç”¨æ–¹å¼ï¼š

```text
<!-- ! å­˜åœ¨è­¦å‘Šçš„ä¿¡æ¯ -->
<!-- ? å­˜åœ¨ç–‘é—®çš„ä¿¡æ¯ -->
<!-- * è¡¨ç¤ºæ¯”è¾ƒé‡è¦çš„ä¿¡æ¯ -->
<!-- todo è¡¨ç¤ºä¸‹ä¸€æ­¥è¦åšçš„ä¿¡æ¯ -->
```

## å‚è€ƒæ–‡æ¡£

- [vue ç°ä»£æ¨¡å¼ ğŸš€](https://cli.vuejs.org/zh/guide/browser-compatibility.html#%E7%8E%B0%E4%BB%A3%E6%A8%A1%E5%BC%8F)
- [vue é£æ ¼æŒ‡å— ğŸš€](https://cn.vuejs.org/v2/style-guide/#%E7%BB%84%E4%BB%B6-%E5%AE%9E%E4%BE%8B%E7%9A%84%E9%80%89%E9%A1%B9%E7%9A%84%E9%A1%BA%E5%BA%8F%E6%8E%A8%E8%8D%90)
- [Commit message å’Œ Change log ç¼–å†™æŒ‡å—](http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html)
- [Git-Commit-Log è§„èŒƒï¼ˆAngular è§„èŒƒï¼‰](https://www.jianshu.com/p/c7e40dab5b05)
